<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Predicting disease spread from flow data • epiflows</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Predicting disease spread from flow data">
<meta property="og:description" content="A collection of tools for the processing and visualisation of flow data.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">epiflows</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/epiflows-class.html">01 Data Preparation</a>
    </li>
    <li>
      <a href="articles/introduction.html">epiflows: package overview</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/reconhub/epiflows">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    

<div id="welcome-to-the-epiflows-package" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#welcome-to-the-epiflows-package" class="anchor"></a>Welcome to the <em>epiflows</em> package!</h1></div>
<p><code>epiflows</code> is a package for predicting and visualising spread of infectious diseases based on flows between geographical locations, e.g., countries. <code>epiflows</code> provides functions for calculating spread estimates, handling flow data, and visualization.</p>
<div id="installing-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-the-package" class="anchor"></a>Installing the package</h2>
<!-- To install the current stable, CRAN version of the package, type: -->
<!-- ```{r install, eval = FALSE} -->
<!-- install.packages("epiflows") -->
<!-- ``` -->
<!-- To benefit from the latest features and bug fixes, install the development, *github* version of the package using: -->
<p>Currently, epiflows is a work in progress and can be installed from github using the <em>remotes</em>, <em>ghit</em>, or <em>devtools</em> package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">"remotes"</span>)) <span class="kw">install.packages</span>(<span class="st">"remotes"</span>, <span class="dt">repos =</span> <span class="st">"https://cloud.rstudio.org"</span>)
remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"reconhub/epiflows"</span>)</code></pre></div>
</div>
</div>
<div id="what-does-it-do" class="section level1">
<h1 class="hasAnchor">
<a href="#what-does-it-do" class="anchor"></a>What does it do?</h1>
<p>The main features of the package include:</p>
<div id="estimation-of-risk" class="section level2">
<h2 class="hasAnchor">
<a href="#estimation-of-risk" class="anchor"></a>Estimation of risk</h2>
<ul>
<li>
<code><a href="reference/estimate_risk_spread.html">estimate_risk_spread()</a></code>: calculate estimates (point estimate and 95% CI) for disease spread from flow data</li>
</ul>
<div id="example" class="section level3">
<h3 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h3>
<p>Estimating the number of new cases flowing to other countries from Espirito Santo, Brazil (Dorigatti <em>et al.</em>, 2017).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"epiflows"</span>)</code></pre></div>
<pre><code>## epiflows is loaded with the following global variables in `global_vars()`:
## coordinates, pop_size, duration_stay, first_date, last_date, num_cases</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"ggplot2"</span>)
<span class="kw">data</span>(<span class="st">"Brazil_epiflows"</span>)
<span class="kw">print</span>(Brazil_epiflows)</code></pre></div>
<pre><code>## 
## /// Epidemiological Flows //
## 
##   // class: epiflows, epicontacts
##   // 15 locations; 100 flows; directed
##   // optional variables: pop_size, duration_stay, num_cases, first_date, last_date 
## 
##   // locations
## 
## # A tibble: 15 x 6
##    id    location_popula… num_cases_time_… first_date_cases last_date_cases
##  * &lt;chr&gt;            &lt;dbl&gt;            &lt;dbl&gt; &lt;fct&gt;            &lt;fct&gt;          
##  1 Espi…          3973697             2600 2017-01-04       2017-04-30     
##  2 Mina…         20997560             4870 2016-12-19       2017-04-20     
##  3 Rio …         16635996              170 2017-02-19       2017-05-10     
##  4 Sao …         44749699              200 2016-12-17       2017-04-20     
##  5 Sout…         86356952             7840 2016-12-17       2017-05-10     
##  6 Arge…               NA               NA &lt;NA&gt;             &lt;NA&gt;           
##  7 Chile               NA               NA &lt;NA&gt;             &lt;NA&gt;           
##  8 Germ…               NA               NA &lt;NA&gt;             &lt;NA&gt;           
##  9 Italy               NA               NA &lt;NA&gt;             &lt;NA&gt;           
## 10 Para…               NA               NA &lt;NA&gt;             &lt;NA&gt;           
## 11 Port…               NA               NA &lt;NA&gt;             &lt;NA&gt;           
## 12 Spain               NA               NA &lt;NA&gt;             &lt;NA&gt;           
## 13 Unit…               NA               NA &lt;NA&gt;             &lt;NA&gt;           
## 14 Unit…               NA               NA &lt;NA&gt;             &lt;NA&gt;           
## 15 Urug…               NA               NA &lt;NA&gt;             &lt;NA&gt;           
## # ... with 1 more variable: length_of_stay &lt;dbl&gt;
## 
##   // flows
## 
## # A tibble: 100 x 3
##    from             to         n
##    &lt;chr&gt;            &lt;chr&gt;  &lt;dbl&gt;
##  1 Espirito Santo   Italy  2828.
##  2 Minas Gerais     Italy 15714.
##  3 Rio de Janeiro   Italy  8164.
##  4 Sao Paulo        Italy 34039.
##  5 Southeast Brazil Italy 76282.
##  6 Espirito Santo   Spain  3270.
##  7 Minas Gerais     Spain 18176.
##  8 Rio de Janeiro   Spain  9443.
##  9 Sao Paulo        Spain 39371.
## 10 Southeast Brazil Spain 88231.
## # ... with 90 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">2018</span><span class="op">-</span><span class="dv">07</span><span class="op">-</span><span class="dv">25</span>)
res &lt;-<span class="st"> </span><span class="kw"><a href="reference/estimate_risk_spread.html">estimate_risk_spread</a></span>(Brazil_epiflows, 
                            <span class="dt">location_code =</span> <span class="st">"Espirito Santo"</span>,
                            <span class="dt">r_incubation =</span> <span class="cf">function</span>(n) <span class="kw">rlnorm</span>(n, <span class="fl">1.46</span>, <span class="fl">0.35</span>),
                            <span class="dt">r_infectious =</span> <span class="cf">function</span>(n) <span class="kw">rnorm</span>(n, <span class="fl">4.5</span>, <span class="fl">1.5</span><span class="op">/</span><span class="fl">1.96</span>),
                            <span class="dt">n_sim =</span> <span class="fl">1e5</span>
                           )</code></pre></div>
<pre><code>## Exportations done</code></pre>
<pre><code>## Importations done</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res</code></pre></div>
<pre><code>##                          mean_cases lower_limit_95CI upper_limit_95CI
## Italy                     0.2233656        0.1520966        0.3078136
## Spain                     0.2255171        0.1537452        0.3126801
## Portugal                  0.2317019        0.1565528        0.3383112
## Germany                   0.1864162        0.1259548        0.2721890
## United Kingdom            0.1613418        0.1195261        0.2089475
## United States of America  0.9253419        0.6252207        1.3511047
## Argentina                 1.1283506        0.7623865        1.6475205
## Chile                     0.2648277        0.1789370        0.3866836
## Uruguay                   0.2408942        0.1627681        0.3517426
## Paraguay                  0.1619724        0.1213114        0.1926966</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res<span class="op">$</span>location &lt;-<span class="st"> </span><span class="kw">rownames</span>(res)
<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(res, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> mean_cases, <span class="dt">y =</span> location)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>(<span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_errorbarh">geom_errorbarh</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">xmin =</span> lower_limit_95CI, <span class="dt">xmax =</span> upper_limit_95CI), <span class="dt">height =</span> .<span class="dv">25</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_bw</a></span>(<span class="dt">base_size =</span> <span class="dv">12</span>, <span class="dt">base_family =</span> <span class="st">"Helvetica"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/labs">ggtitle</a></span>(<span class="st">"Risk of yellow fever spread from Espirito Santo, Brazil"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/labs">xlab</a></span>(<span class="st">"Number of cases"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/lims">xlim</a></span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="ot">NA</span>))</code></pre></div>
<p><img src="index_files/figure-html/the_estimate-1.png" width="700"></p>
</div>
</div>
<div id="data-structure-to-store-flows-and-metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#data-structure-to-store-flows-and-metadata" class="anchor"></a>Data structure to store flows and metadata</h2>
<ul>
<li>
<code>epiflows</code>: an S3 class for storing flow data, as well as country metadata. This class contains two data frames containing flows and location metadata based on the <code>epicontacts</code> class from the <a href="http://www.repidemicsconsortium.org/epicontacts/">epicontacts pacakge</a>.</li>
<li>
<code><a href="reference/make_epiflows.html">make_epiflows()</a></code>: a constructor for <code>epiflows</code> from either a pair of data frames or inflows and outflows and location data frame.</li>
<li>
<code><a href="reference/add_coordinates.html">add_coordinates()</a></code>: add latitude/longitude to the location data in an <code>epiflows</code> object using <code><a href="http://www.rdocumentation.org/packages/ggmap/topics/geocode">ggmap::geocode()</a></code>
</li>
</ul>
</div>
<div id="basic-methods" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-methods" class="anchor"></a>Basic methods</h2>
<ul>
<li>
<code>x[j = myLocations]</code>: subset an <code>epiflows</code> object to location(s) <em>myLocations</em>
</li>
<li>
<code>plot()</code>: plot flows from an <code>epiflows</code> object on a <em>leaflet</em> world map</li>
<li>
<code>print()</code>: print summary for an <code>epiflows</code> object</li>
</ul>
</div>
<div id="global-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#global-variables" class="anchor"></a>Global variables</h2>
<p>These are variables that <code><a href="reference/estimate_risk_spread.html">estimate_risk_spread()</a></code> understands from the epiflows object. These represent keys that have values mapping to column names in your locations metadata.</p>
<ul>
<li>
<code><a href="reference/global_vars.html">global_vars()</a></code>: view, set, and reset global variables for epiflows</li>
<li>
<code><a href="reference/get_vars.html">get_vars()</a></code>: access variables from the locations metadata</li>
<li>
<code><a href="reference/get_vars.html">set_vars()</a></code>: map variables to columns in the locations metadata</li>
</ul>
</div>
<div id="accessors" class="section level2">
<h2 class="hasAnchor">
<a href="#accessors" class="anchor"></a>Accessors</h2>
<ul>
<li>
<code><a href="reference/get_flows.html">get_flows()</a></code>: return flow data</li>
<li>
<code><a href="reference/get_locations.html">get_locations()</a></code>: return metadata for all locations</li>
<li>
<code><a href="reference/add_coordinates.html">get_coordinates()</a></code>: return coordinates for each location (if provided)</li>
<li>
<code><a href="reference/get_id.html">get_id()</a></code>: return a vector of location identifiers</li>
<li>
<code><a href="reference/get_n.html">get_n()</a></code>: return the number of cases per flow</li>
<li>
<code><a href="reference/get_pop_size.html">get_pop_size()</a></code>: return the population size for each location (if provided)</li>
</ul>
</div>
</div>
<div id="resources" class="section level1">
<h1 class="hasAnchor">
<a href="#resources" class="anchor"></a>Resources</h1>
<div id="vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h2>
<p>An overview and examples of <em>epiflows</em> are provided in the vignettes:</p>
<ol style="list-style-type: decimal">
<li>A Brief Introduction to epiflows: <code><a href="articles/introduction.html">vignette("introduction", package = "epiflows")</a></code>
</li>
<li>Constructing epiflows objects: <code><a href="articles/epiflows-class.html">vignette("epiflows-class", package = "epiflows")</a></code>
</li>
</ol>
</div>
<div id="getting-help-online" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-help-online" class="anchor"></a>Getting help online</h2>
<p>Bug reports and feature requests should be posted on <em>github</em> using the <a href="http://github.com/reconhub/epiflows/issues"><em>issue</em></a> system. All other questions should be posted on the <strong>RECON forum</strong>: <br><a href="http://www.repidemicsconsortium.org/forum/" class="uri">http://www.repidemicsconsortium.org/forum/</a></p>
<p>Contributions are welcome via <strong>pull requests</strong>.</p>
<p>Please note that this project is released with a <a href="CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<p>Dorigatti I, Hamlet A, Aguas R, Cattarino L, Cori A, Donnelly CA, Garske T, Imai N, Ferguson NM. International risk of yellow fever spread from the ongoing outbreak in Brazil, December 2016 to May 2017. Euro Surveill. 2017;22(28):pii=30572. DOI: <a href="https://doi.org/10.2807/1560-7917.ES.2017.22.28.30572">10.2807/1560-7917.ES.2017.22.28.30572</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/reconhub/epiflows">https://​github.com/​reconhub/​epiflows</a>
</li>
<li>Report a bug at <br><a href="https://github.com/reconhub/epiflows/issues">https://​github.com/​reconhub/​epiflows/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Pawel Piatkowski <br><small class="roles"> Author, maintainer </small>  </li>
<li>Paula Moraga <br><small class="roles"> Author </small>  </li>
<li>Isobel Blake <br><small class="roles"> Author </small>  </li>
<li>Thibaut Jombart <br><small class="roles"> Author </small>  </li>
<li>VP Nagraj <br><small class="roles"> Author </small>  </li>
<li>Zhian N. Kamvar <br><small class="roles"> Author </small>  </li>
<li>Salla E. Toikkanen <br><small class="roles"> Author </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://www.repostatus.org/#wip"><img src="http://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP - Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a></li>
<li><a href="https://cran.r-project.org/package=epiflows"><img src="http://www.r-pkg.org/badges/version/epiflows" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://travis-ci.org/reconhub/epiflows"><img src="https://travis-ci.org/reconhub/epiflows.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://codecov.io/gh/reconhub/epiflows"><img src="https://codecov.io/gh/reconhub/epiflows/branch/master/graph/badge.svg" alt="codecov"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Pawel Piatkowski, Paula Moraga, Isobel Blake, Thibaut Jombart, VP Nagraj, Zhian N. Kamvar, Salla E. Toikkanen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
